/**
 * Shower HTML presentation engine: github.com/shower/shower
 * @copyright 2010â€“2014 Vadim Makeev, pepelsbey.net
 * @license MIT license: github.com/shower/shower/wiki/MIT-License
 */
window.shower=window.shower||function(a,b,c){function d(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function e(a,b){for(var c in b)a.setAttribute(c,b[c])}function f(a,b){for(;a.hasChildNodes();)a.removeChild(a.lastChild);a.innerHTML(b)}var g,h={},i=a.location,j=b.body,k=[],l=[],m=!(!a.history||!a.history.pushState);return d.prototype={getSlideNumber:function(){return this.number},isLast:function(){return h.slideList.length===this.number+1},isFinished:function(){return this.innerComplete>=this.innerLength},process:function(a){return this.timing?(this.initTimer(a),this):(this.next(a),this)},initTimer:function(a){var b=this;return b.timing?(b.stopTimer(),g=b.isFinished()?setInterval(function(){b.stopTimer(),a.next()},b.timing*(b.innerLength||1)):setInterval(function(){b.isFinished()?(b.stopTimer(),a.next()):b.next(a)},b.timing),this):!1},stopTimer:function(){return g&&(clearInterval(g),g=!1),this},prev:function(a){var c,d=this;return!d.hasInnerNavigation||d.isFinished()||0===d.innerComplete?(a.prev(),!1):(c=b.getElementById(d.id).querySelectorAll(".next.active"),!c||c.length<1?!1:(d.innerComplete>0?(d.innerComplete--,c[c.length-1].classList.remove("active")):a.prev(),this))},next:function(a){var c,d=this;return!d.hasInnerNavigation||d.isFinished()?(a.next(),!1):(d.isFinished()||(c=b.getElementById(d.id).querySelectorAll(".next:not(.active)"),c[0].classList.add("active"),d.innerComplete++),this)}},h._getData=function(a,b){return a.dataset?a.dataset[b]:a.getAttribute("data-"+b)},h.slideList=[],h.init=function(a,c){var e;a=a||".slide",c=c||"div.progress div",k=b.querySelectorAll(a),l=b.querySelector(c);for(var f=0;f<k.length;f++)k[f].id||(k[f].id=f+1),e=h._getData(k[f],"timing"),e&&/^(\d{1,2}:)?\d{1,3}$/.test(e)?(-1!==e.indexOf(":")?(e=e.split(":"),e=1e3*(60*parseInt(e[0],10)+parseInt(e[1],10))):e=1e3*parseInt(e,10),0===e&&(e=!1)):e=!1,h.slideList.push(new d({id:k[f].id,number:f,hasInnerNavigation:null!==k[f].querySelector(".next"),timing:e,innerLength:k[f].querySelectorAll(".next").length,innerComplete:0}));return h},h._getTransform=function(){var b=Math.max(j.clientWidth/a.innerWidth,j.clientHeight/a.innerHeight);return"scale("+1/b+")"},h._applyTransform=function(a){return["WebkitTransform","MozTransform","msTransform","OTransform","transform"].forEach(function(b){j.style[b]=a}),!0},h._isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},h._normalizeSlideNumber=function(a){if(!h._isNumber(a))throw new Error("Gimme slide number as Number, baby!");return 0>a&&(a=0),a>=h.slideList.length&&(a=h.slideList.length-1),a},h._getSlideIdByEl=function(a){for(;"BODY"!==a.nodeName&&"HTML"!==a.nodeName;){if(a.classList.contains("slide"))return a.id;a=a.parentNode}return""},h._checkInteractiveElement=function(a){return"A"===a.target.nodeName},h.getSlideNumber=function(a){var b,c=h.slideList.length-1;for(""===a&&(b=0);c>=0;--c)if(a===h.slideList[c].id){b=c;break}return b},h.go=function(a,b){var c;if(!h._isNumber(a))throw new Error("Gimme slide number as Number, baby!");return h.slideList[a]?(i.hash=h.getSlideHash(a),h.updateProgress(a),h.updateActiveAndVisitedSlides(a),h.isSlideMode()&&(h.showPresenterNotes(a),c=h.slideList[a],c.timing&&c.initTimer(h)),"function"==typeof b&&b(),a):!1},h.next=function(a){var b=h.getCurrentSlideNumber(),c=h.slideList[b+1];return c?(h.go(b+1),"function"==typeof a&&a(),this):!1},h._turnNextSlide=function(a){var b=h.getCurrentSlideNumber(),c=h.slideList[b];h.isSlideMode()?(c.stopTimer(),c.next(h)):h.go(b+1),"function"==typeof a&&a()},h.prev=h.previous=function(a){var b=h.getCurrentSlideNumber();return 1>b?!1:(h.go(b-1),"function"==typeof a&&a(),!0)},h._turnPreviousSlide=function(a){var b=h.getCurrentSlideNumber(),c=h.slideList[b];return c.stopTimer(),h.isSlideMode()?c.prev(h):h.go(b-1),"function"==typeof a&&a(),!0},h.first=function(a){var b=h.slideList[h.getCurrentSlideNumber()];b&&b.timing&&b.stopTimer(),h.go(0),"function"==typeof a&&a()},h.last=function(a){var b=h.slideList[h.getCurrentSlideNumber()];b&&b.timing&&b.stopTimer(),h.go(h.slideList.length-1),"function"==typeof a&&a()},h.enterSlideMode=function(a){var b=h.getCurrentSlideNumber();return j.classList.remove("list"),j.classList.add("full"),h.isListMode()&&m&&history.pushState(null,null,i.pathname+"?full"+h.getSlideHash(b)),h._applyTransform(h._getTransform()),"function"==typeof a&&a(),!0},h.enterListMode=function(a){var b;return j.classList.remove("full"),j.classList.add("list"),h.clearPresenterNotes(),h._applyTransform("none"),h.isListMode()?!1:(b=h.getCurrentSlideNumber(),h.slideList[b].stopTimer(),h.isSlideMode()&&m&&history.pushState(null,null,i.pathname+h.getSlideHash(b)),h.scrollToSlide(b),"function"==typeof a&&a(),!0)},h.toggleMode=function(a){return h.isListMode()?h.enterSlideMode():h.enterListMode(),"function"==typeof a&&a(),!0},h.getCurrentSlideNumber=function(){var a=h.slideList.length-1,b=i.hash.substr(1);if(""===b)return-1;for(;a>=0;--a)if(b===h.slideList[a].id)return a;return 0},h.scrollToSlide=function(c){var d,e=!1;if(!h._isNumber(c))throw new Error("Gimme slide number as Number, baby!");if(h.isSlideMode())throw new Error("You can't scroll to because you in slide mode. Please, switch to list mode.");if(-1===c)return e;if(!h.slideList[c])throw new Error("There is no slide with number "+c);return d=b.getElementById(h.slideList[c].id),a.scrollTo(0,d.offsetTop),e=!0,e},h.isListMode=function(){return m?!/^full.*/.test(i.search.substr(1)):j.classList.contains("list")},h.isSlideMode=function(){return m?/^full.*/.test(i.search.substr(1)):j.classList.contains("full")},h.updateProgress=function(a){if(null===l)return!1;if(!h._isNumber(a))throw new Error("Gimme slide number as Number, baby!");return l.style.width=(100/(h.slideList.length-1)*h._normalizeSlideNumber(a)).toFixed(2)+"%",progPct=(100/(h.slideList.length-1)*h._normalizeSlideNumber(a)).toFixed(0),e(l,{role:"progressbar","aria-valuenow":progPct,"aria-valuemin":"0","aria-valuemax":"100","aria-valuetext":"Slideshow Progress: "+progPct+"%"}),!0},h.updateActiveAndVisitedSlides=function(a){var c,d,e=h.slideList.length;if(a=h._normalizeSlideNumber(a),!h._isNumber(a))throw new Error("Gimme slide number as Number, baby!");for(c=0;e>c;++c)d=b.getElementById(h.slideList[c].id),a>c?(d.classList.remove("active"),d.classList.add("visited")):c>a?(d.classList.remove("visited"),d.classList.remove("active")):(d.classList.remove("visited"),d.classList.add("active"),b.title=d.getElementsByTagName("h2").firstChild.nodeValue,f(b.getElementById("live-region"),d.innerHTML));return!0},h.clearPresenterNotes=function(){h.isSlideMode()&&a.console&&a.console.clear&&console.clear()},h.showPresenterNotes=function(c){if(h.clearPresenterNotes(),a.console){c=h._normalizeSlideNumber(c);var d=h.slideList[c].id,e=h.slideList[c+1]?h.slideList[c+1].id:null,f=b.getElementById(d).querySelector("footer");if(f&&f.innerHTML&&console.info(f.innerHTML.replace(/\n\s+/g,"\n")),e){var g=b.getElementById(e).querySelector("h2");g&&(g=g.innerHTML.replace(/^\s+|<[^>]+>/g,""),console.info("NEXT: "+g))}}},h.getSlideHash=function(a){if(!h._isNumber(a))throw new Error("Gimme slide number as Number, baby!");return a=h._normalizeSlideNumber(a),"#"+h.slideList[a].id},h.wheel=function(a){var d,e=b.querySelector("body"),f="locked"===e.getAttribute("data-scroll");f||h.isListMode()||(e.setAttribute("data-scroll","locked"),d=a.deltaY===c?a.wheelDeltaY<0:a.deltaY>0,d?h._turnNextSlide():h._turnPreviousSlide(),setTimeout(function(){e.setAttribute("data-scroll","unlocked")},200))},a.addEventListener("DOMContentLoaded",function(){var a=h.getCurrentSlideNumber(),b=j.classList.contains("full")||h.isSlideMode();-1===a&&b?h.go(0):(0===a||b)&&h.go(a),b&&h.enterSlideMode()},!1),a.addEventListener("popstate",function(){var a=h.getCurrentSlideNumber();-1!==a&&h.go(a),h.isListMode()?h.enterListMode():h.enterSlideMode()},!1),a.addEventListener("resize",function(){h.isSlideMode()&&h._applyTransform(h._getTransform())},!1),b.addEventListener("keydown",function(a){var b,c=h.getCurrentSlideNumber(),d=h.slideList[-1!==c?c:0];switch(a.which){case 80:h.isListMode()&&a.altKey&&a.metaKey&&(a.preventDefault(),b=d.number,h.go(b),h.enterSlideMode(),h.showPresenterNotes(b),d.timing&&d.initTimer(h));break;case 116:a.preventDefault(),h.isListMode()?(b=a.shiftKey?d.number:0,h.go(b),h.enterSlideMode(),h.showPresenterNotes(b),d.timing&&d.initTimer(h)):h.enterListMode();break;case 13:h.isListMode()&&-1!==c&&(a.preventDefault(),h.enterSlideMode(),h.showPresenterNotes(c),d.timing&&d.initTimer(h));break;case 27:h.isSlideMode()&&(a.preventDefault(),h.enterListMode());break;case 33:case 38:case 37:case 72:case 75:if(a.altKey||a.ctrlKey||a.metaKey)return;a.preventDefault(),h._turnPreviousSlide();break;case 34:case 40:case 39:case 76:case 74:if(a.altKey||a.ctrlKey||a.metaKey)return;a.preventDefault(),h._turnNextSlide();break;case 36:a.preventDefault(),h.first();break;case 35:a.preventDefault(),h.last();break;case 9:case 32:a.preventDefault(),h[a.shiftKey?"_turnPreviousSlide":"_turnNextSlide"]()}},!1),h.init(),b.addEventListener("click",function(a){var b,c,d=h._getSlideIdByEl(a.target);d&&h.isListMode()&&(b=h.getSlideNumber(d),h.go(b),h.enterSlideMode(),h.showPresenterNotes(b),c=h.slideList[b],c.timing&&c.initTimer(h))},!1),b.addEventListener("touchstart",function(b){var c,d,e,f=h._getSlideIdByEl(b.target);f&&(h.isSlideMode()&&!h._checkInteractiveElement(b)&&(e=b.touches[0].pageX,e>a.innerWidth/2?h._turnNextSlide():h._turnPreviousSlide()),h.isListMode()&&(c=h.getSlideNumber(f),h.go(c),h.enterSlideMode(),h.showPresenterNotes(c),d=h.slideList[c],d.timing&&d.initTimer(h)))},!1),b.addEventListener("touchmove",function(a){h.isSlideMode()&&a.preventDefault()},!1),b.addEventListener("wheel",h.wheel,!1),b.addEventListener("mousewheel",h.wheel,!1),h}(this,this.document);